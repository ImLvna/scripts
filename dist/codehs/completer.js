(async()=>{const v=Array.from(document.querySelectorAll(".module-toggler")),w=["video","free-response","example","survey","resource"],k=[];async function x(){const f=Array.from(document.querySelectorAll(w.map((E)=>`.${E}.unopened, .${E}.not-submitted`).join(", ")));for(let E of f){try{if(k.includes(E.href))continue;const b=await fetch(E.href).then((j)=>j.text());if(!b)throw new Error("Error fetching item");const u=b.match(/(?<=studentAssignmentID": )\d+(?=,)/)?.[0];if(!u)throw new Error("Error getting assignment id");const h=new FormData;if(h.append("student_assignment_id",u),h.append("method","submit_assignment"),(await new Promise((j)=>{$.ajax({url:"/lms/ajax/submit_assignment",type:"POST",data:h,processData:!1,contentType:!1,success:(z)=>j(JSON.parse(z))})})).status==="ok")E.classList.remove("unopened"),E.classList.add("reviewed");else throw new Error("Error submitting item")}catch(b){console.log("Error submitting item",E)}k.push(E.href)}}let q=0;for(let f of v)q++,f.click(),await new Promise((E)=>setTimeout(E,1000)),await x(),console.log(`Completed page ${q}`);console.log("Done!")})();
